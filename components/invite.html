<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <title>Markdown Converter</title>
    <post>
        return "<"+"style>"+open("public/main.css").read()+"<"+"/style>"
    </post>
    <post>
        return tailwind+daisyui
    </post>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/2.1.3/marked.min.js"></script>
    <style>
        h1 {
            font-size: 2rem;
            margin: 0;
        }
        h2 {
            font-size: 1.75rem;
            margin: 20px 0 10px;
        }
        h3 {
            font-size: 1.5rem;
            margin: 15px 0 5px;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 4px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow: auto;
        }
    </style>
</head>

    <body>
        <py>
            render("navbar", locals() | globals())
        </py>
        <div class="w-full relative flex flex-row gap-5 lg:divide-x lg:divide-black/20 pl-5 lg:pl-8 pr-5 lg:pr-20">
            <div class="max-w-52 min-w-52 text-white h-screen overflow-y-scroll hidden lg:block">
                <h3 class="text-3xl font-semibold mb-4 text-[#338EF7]">Sections</h3>
                <ul id="nav-list" class="space-y-2 text-black"></ul>
            </div>
            <div class="lg:pl-5 w-full">
                <div id="html-content" class="mt-5 bg-white rounded-lg"></div>
            </div>
        </div>

        <script>
            const markdownText = `# Main Section
Welcome to the Markdown Test Document!
## Subsection 1
This subsection includes various elements:

# Hello Section

### List Example
- Item 1
- Item 2
- Subitem 1
- Subitem 2
### Numbered List
1. First Item
2. Second Item
## Subsection 2
Here are some other features:
### Code Block
\`\`\`javascript
console.log('Hello, World!');
\`\`\`
### Additional Formatting
You can also add **bold text**, *italic text*, and [links](https://example.com).
### Table Example
| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Row 1   | Data 1   | Data 2   |
| Row 2   | Data 3   | Data 4   |
| Row 3   | Data 5   | Data 6   |
`;

            const htmlContent = marked(markdownText);
            document.getElementById('html-content').innerHTML = htmlContent;

            function generateNavigation(mdText) {
                const lines = mdText.split('\n');
                const navList = document.getElementById('nav-list');
                navList.innerHTML = '';

                lines.forEach((line) => {
                    if (line.startsWith('# ')) {
                        const title = line.substring(2);
                        const id = title.replace(/\s+/g, '-').toLowerCase(); // Create a unique ID
                        const item = document.createElement('li');
                        item.setAttribute("class", "w-full flex")
                        item.innerHTML = `<a href="#${id}" class="font-semibold px-2 py-[2px] w-full border border-transparent rounded-md hover:bg-black/[0.03] hover:border-black/[0.06]">${title}</a>`;
                        navList.appendChild(item);
                    } else if (line.startsWith('## ')) {
                        const title = line.substring(3);
                        const id = title.replace(/\s+/g, '-').toLowerCase();
                        const item = document.createElement('li');
                        item.innerHTML = `<a href="#${id}" class="ml-2 font-medium px-2 py-[2px] w-full border border-transparent rounded-md hover:bg-black/[0.03] hover:border-black/[0.06]">${title}</a>`;
                        navList.appendChild(item);
                    } else if (line.startsWith('### ')) {
                        const title = line.substring(4);
                        const id = title.replace(/\s+/g, '-').toLowerCase();
                        const item = document.createElement('li');
                        item.innerHTML = `<a href="#${id}" class="ml-7 hover:underline">${title}</a>`;
                        navList.appendChild(item);
                    }
                });
            }

            generateNavigation(markdownText)
        </script>

        <py>
            render("footer", locals() | globals())
        </py>
    </body>

</html>